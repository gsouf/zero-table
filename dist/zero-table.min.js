var ZeroTable={};ZeroTable.Data={},ZeroTable.Drawer={},ZeroTable.Column={},ZeroTable._plugins={},ZeroTable.Tools={},ZeroTable.extendClass=function(a,b,c){a.prototype=Object.create(b.prototype);for(var d in b.prototype)b.prototype.hasOwnProperty(d)&&(a.prototype[d]=b.prototype[d]);for(var d in c)a.prototype[d]=c[d]},ZeroTable.clone=function(a){var b={};return ZeroTable.extend(b,[a]),b},ZeroTable.extend=function(a,b){a?a instanceof Array&&!b&&(b=a,a={}):a={};for(var c=0;c<b.length;c++){var d=b[c];for(var e in d)d.hasOwnProperty(e)&&(a[e]=d[e])}return a},ZeroTable.foreach=function(a,b){if(a instanceof Array)for(var c=0;c<a.length;c++){var d=b(a[c],c,a);if(!1===d)break}else for(c in a)if(a.hasOwnProperty(c)){var d=b(a[c],c,a);if(!1===d)break}},ZeroTable.createPlugin=function(a){"function"==typeof a&&(a=a());var b=a.defaultOptions||{},c=a.listen||{},d=a.tableKeys||{},e=a.optionOverrides||{};if(!a.name)throw"a plugin must have a name";var f=function(f){ZeroTable.Plugin.apply(this,[a.name,c,d]),this.setOptions(b,f),this.setOptionOverrides(e),a.init&&a.init.apply(this,[])};f.__pluginName=a.name;var g=a.pluginPrototype||{};ZeroTable.extendClass(f,ZeroTable.Plugin,g),ZeroTable.registerPlugin(f)},ZeroTable.registerPlugin=function(a){ZeroTable._plugins[a.__pluginName]=a},ZeroTable.loadPlugin=function(a,b){if("string"==typeof a){if(ZeroTable._plugins.hasOwnProperty(a))return b?new ZeroTable._plugins[a](b):new ZeroTable._plugins[a];throw"Plugin "+a+" was not registered and could not be loaded."}return Array.isArray(a)?ZeroTable.loadPlugin(a[0],a[1]):"object"==typeof a?a:void 0},ZeroTable.Bindable=function(){},ZeroTable.Bindable.prototype={bind:function(a,b){this.bindable_bounds||(this.bindable_bounds={}),this.bindable_bounds[a]||(this.bindable_bounds[a]=[]),this.bindable_bounds[a].push(b)},fire:function(a,b){var c=new ZeroTable.Bindable.Event(this);if(this.bindable_bounds&&this.bindable_bounds[a])for(var d=0;d<this.bindable_bounds[a].length;d++){this.bindable_bounds[a][d].apply(c,b);if(c.interrupted()===!0)return c}if(this.bindable_forwards)for(var d in this.bindable_forwards){var e=a;this.bindable_forwards[d].key&&(e=this.bindable_forwards[d].key+"."+a),this.bindable_forwards[d].item.fire(e,b)}return c},forwardEvents:function(a,b){this.bindable_forwards||(this.bindable_forwards=[]),this.bindable_forwards.push({item:a,key:b})}},ZeroTable.Bindable.extends=function(a){a.prototype.bind=ZeroTable.Bindable.prototype.bind,a.prototype.on=ZeroTable.Bindable.prototype.bind,a.prototype.trigger=ZeroTable.Bindable.prototype.fire,a.prototype.fire=ZeroTable.Bindable.prototype.fire,a.prototype.forwardEvents=ZeroTable.Bindable.prototype.forwardEvents},ZeroTable.Bindable.Event=function(a){this.context=a,this._interupted=!1},ZeroTable.Bindable.Event.prototype={stopPropagation:function(){this._interupted=!0},interrupted:function(){return this._interupted}},ZeroTable.DataConnector=function(a,b){this.dataAdapter=a,this.data=[],ZeroTable.extend(this,[{order:{},filters:{},limit:50,offset:0,defaultUpdateDelay:200},b]),this._currentTransaction=null,this._currentUpdateTimeout=null,ZeroTable.foreach(this.columns,function(a,b,c){a instanceof ZeroTable.Column.Definition||(c[b]=new ZeroTable.Column.Definition(a))})},ZeroTable.DataConnector.prototype={setOrder:function(a){this.order=a,this.fire("orderChange",[this])},clearOrder:function(){this.order=order,this.fire("orderChange",[this])},filterColumn:function(a,b){null===b||void 0===b?delete this.filters[a]:this.filters[a]=b},getFilters:function(){return this.filters},getOrder:function(a){return a?this.order[a]:this.order},setOffset:function(a){this.offset=a,this.fire("offsetChange",[this])},setLimit:function(a){this.limit=a,this.fire("limitChange",[this])},__generateGuid:function(){var a=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()},update:function(a){var b=this.__generateGuid;this._currentTransaction=b,this._currentUpdateTimeout&&clearTimeout(this._currentUpdateTimeout),void 0===a||null===a?a=null:isNaN(a)?(a=null,console.error("Dataconnector.update delay is not a number, default value used instead")):a<0&&(a=0,console.error("Dataconnector.update delay was negative. 0 used instead")),null===a&&(a=this.defaultUpdateDelay);var c=this;this._currentUpdateTimeout=setTimeout(function(){c.fire("loading",[c,c._currentTransaction]),c.dataAdapter.findRange(c,function(a){if(c.fire("loadEnd",[c,c._currentTransaction]),c._currentTransaction!==b)return console.info("A transaction was aborted in favor of a more recent"),void c.fire("loadReplaced",[c,c._currentTransaction]);c.data=a.data,c.totalRows=a.totalRows,c.totalFilteredRows=a.totalFilteredRows,c.currentOffset=a.offset,c.currentLimit=a.limit,c.fire("dataUpdated",[c,c._currentTransaction])},function(){c.fire("loadEnd",[c,c._currentTransaction]),c.fire("loadFailed",[c,c._currentTransaction])})},a)},getData:function(){return this.data}},ZeroTable.Bindable.extends(ZeroTable.DataConnector),ZeroTable.Data.DataAdapter=function(){},ZeroTable.Data.DataAdapter.prototype={findRange:function(a,b){}},ZeroTable.Bindable.extends(ZeroTable.Data.DataAdapter),ZeroTable.Data.DataArray=function(a){this.data=a},ZeroTable.extendClass(ZeroTable.Data.DataArray,ZeroTable.Data.DataAdapter,{findRange:function(a,b){var c=a.offset||0,d=a.limit||0,e=this.getSortedFilteredData(a);if(c<0)throw"Offset cant be negative";if(d<0)throw"Limit cant be negative";var f=[],g=d>0?c+d:e.length;g>e.length&&(g=e.length);for(var h=c;h<g;h++)f.push(e[h]);b({data:f,totalRows:this.data.length,totalFilteredRows:e.length,offset:a.offset,limit:a.limit})},countAll:function(){return this.data.length},getSortedFilteredData:function(a){var b=this.data.slice(0);if(a.filters&&Object.keys(a.filters).length>0)throw"NOT IMPLEMENTED YET";return a.order&&b.sort(function(b,c){var d=0,e=a.order;return ZeroTable.foreach(e,function(a,e){var f="asc"===a?-1:1;return b[e]<c[e]?(d=f,!1):b[e]!=c[e]?(d=f*-1,!1):void(d=0)}),d}),b}}),ZeroTable.Table=function(a){var b=this;ZeroTable.extend(this,[{columns:[],plugins:null,idProperties:[]},a]),null==this.plugins&&(this.plugins=["core.tableBody","core.header","core.sizing","core.renderCell","core.clickEvents","core.pagination","core.selection","core.loading","core.searchHeader"]),ZeroTable.foreach(this.plugins,function(a,c){b.plugins[c]=ZeroTable.loadPlugin(a)}),ZeroTable.foreach(this.columns,function(a,b,c){a instanceof ZeroTable.Column.Definition||(c[b]=new ZeroTable.Column.Definition(a))})},ZeroTable.Table.prototype={getColumnDefinition:function(a){var b=null;if("string"==typeof a?b=a:a instanceof jQuery&&(b=a.attr("data-zt-column")),b){var c=null;return ZeroTable.foreach(this.columns,function(a){if(a.getName()==b)return c=a,!1}),c}return null},getRowId:function(a){for(var b=a.data("dataSet"),c="",d=0;d<this.idProperties.length;d++)c+=b[this.idProperties[d]];return c}},ZeroTable.TableInstance=function(a,b,c){a instanceof ZeroTable.Table?this.table=a:this.table=new ZeroTable.Table(a),b instanceof Array?this.datapool=new ZeroTable.Data.DataArray(b):this.datapool=b,this.autoload=!0,c=c||{},c.drawer?this.drawer=c.drawer:this.drawer=new ZeroTable.Drawer.NoTable,this.dataConnector=new ZeroTable.DataConnector(this.datapool,c),this.dataConnector.forwardEvents(this,"data"),this.$table=null;var d=this;this.dataConnector.bind("dataUpdated",function(a){d.tableEvent("dataUpdated",{dataConnector:a,data:a.getData(),$table:d.$table})}),ZeroTable.foreach(this.table.plugins,function(a,b,c){a.prepare(d)}),this.tableEvent("onInitialize",{}),this.autoload&&this.dataConnector.update()},ZeroTable.TableInstance.prototype={draw:function(){var a,b=this;if(this.$table)a=this.$table,this.tableEvent("onClearTable",{$table:a});else if(a=b.drawer.drawTable(b),this.$table=a,this.tableEvent("onInitTable",{$table:a}),!jQuery.contains(document,a[0])){var c=this;$(document).on("DOMNodeInserted",function(b){b.target===a[0]&&(c.tableEvent("addedToDom",{$table:a}),$(document).off(b))})}var d=this.dataConnector.getData();return this.tableEvent("onDrawTable",{$table:a,data:d}),a},hasOption:function(a){return!!this.table.hasOwnProperty(a)},getOption:function(a){return this.table.hasOwnProperty(a)?this.table[a]:null},plugKey:function(a,b){this[a]=b},update:function(){this.dataConnector.update()},tableEvent:function(a,b){this.fire(a,[new ZeroTable.TableEvent(this,b)])}},ZeroTable.Bindable.extends(ZeroTable.TableInstance),ZeroTable.TableEvent=function(a,b){var c=this;ZeroTable.foreach(b,function(a,b){c[b]=a}),this.tableInstance=a},ZeroTable.Column.Definition=function(a){if(this.options={},ZeroTable.extend(this.options,[{visible:!0},a]),!a.name)throw"no name was specified for the column definition. Name is required"},ZeroTable.Column.Definition.prototype={getName:function(){return this.options.name},getDataIndex:function(){return this.options.dataIndex?this.options.dataIndex:this.getName()}},ZeroTable.Column.Cell=function(a){this.$cell=a,this._roles=[]},ZeroTable.Column.Cell.prototype={addRole:function(a){this._roles.push(a),this.$cell.attr("zt-cell-role",this._roles.join(" "))},hasRole:function(a){return this._roles.indexOf(a)>=0}},ZeroTable.Drawer.NoTable=function(){},ZeroTable.Drawer.NoTable.prototype={drawTable:function(a){var b=$("<div/>");b.addClass("zt-scroller");var c=$("<div/>");return c.addClass("zt-wrapper"),b.append(c),$tableWrapper=$("<div/>"),$tableWrapper.addClass("zt-table-wrapper"),c.append($tableWrapper),$realTable=$("<div/>"),$realTable.addClass("zt-table-table"),$tableWrapper.append($realTable),b},drawRow:function(a,b){var c=$("<div/>");return b.skipClass||c.addClass("zt-table-tr"),b.class&&c.addClass(b.class),b.role&&c.attr("zt-row-role",b.role),c},drawCell:function(a,b,c){var d=$("<div/>");c=c||{},c.skipClass||d.addClass("zt-table-td"),d.attr("data-zt-column",a.options.name),null!==b&&void 0!==b&&d.html(b);var e=new ZeroTable.Column.Cell(d);return d.data("zt-cell",e),e}},ZeroTable.stringRendererParser=function(a){if(a=a||{},this.filters={abs:function(a){return Math.abs(a)},capitalize:function(a){return a.charAt(0).toUpperCase()+a.slice(1).toLowerCase()},default:function(a,b){return void 0===a||null===a?b:a},length:function(a){return a.length},lower:function(a){return a.toLowerCase()},upper:function(a){return a.toUpperCase()}},a.filters)for(var b in a.filters)this.addFilter(b,a.filters[b])},ZeroTable.stringRendererParser.prototype={addFilter:function(a,b){this.filters[a]=b},render:function(a,b){var c=this;a=a.replace(/\[(\d+)\]/g,".$1");for(var d=a.split(/\.(?![^\(]*\))/g),e=b;d.length>0;){var f=d.shift(),g=f.split(/\|(?![^\(]*\))/g);null===e||void 0==e||"object"!=typeof e?(e=null,g.shift()):e=e[g.shift()],e=function(d,e){if(e.length>0)for(var f=0;f<e.length;f++){var g=e[f].match(/\(.*\)/g);if(g){if(filterName=e[f].slice(0,e[f].indexOf("(")),g.length>1)throw"invalid render string : "+a;if(g=g[0].slice(1,-1))try{g=JSON.parse("["+g+"]")}catch(b){throw'Error while parsing render string params : "('+g+')" in "'+a+'". '+b}else g=[]}else filterName=e[f],g=[];if(!c.filters.hasOwnProperty(filterName))throw"filter "+filterName+" does not exist";if("function"!=typeof c.filters[filterName])throw"filter "+filterName+" exists but is not a function";d=c.filters[filterName].apply({set:b},[d].concat(g))}return d}(e,g)}return e}},ZeroTable.Plugin=function(a,b,c){this.tableInstanceEvents=b,this.tableInstanceKeys=c,this.pluginName=a,this._options={},this._optionOverrides={}},ZeroTable.Plugin.prototype={prepare:function(a){var b=this;if(this.tableInstanceEvents){ZeroTable.foreach(this.tableInstanceEvents,function(c,d){var e=d.split(",");ZeroTable.foreach(e,function(d){a.bind(d.trim(),function(){this.plugin=b,c.apply(this,arguments)})})})}this.tableInstanceKeys&&ZeroTable.foreach(this.tableInstanceKeys,function(b,c){a.plugKey(c,b)})},setOptions:function(a,b){this._options={},b?ZeroTable.extend(this._options,[a,b]):a&&(this._options=a)},setOption:function(a,b){this._options[a]=b},setOptionOverrides:function(a){this._optionOverrides=a},getOption:function(a,b){var c=null;return b&&this._optionOverrides.hasOwnProperty(a)&&b.hasOption(this._optionOverrides[a])?c=b.getOption(this._optionOverrides[a]):this._options.hasOwnProperty(a)&&(c=this._options[a]),c}},ZeroTable.Plugin.SearchHeader={},ZeroTable.Plugin.SearchHeader.SearcherFactory=function(a){ZeroTable.extend(this,[{searchers:{}},a])},ZeroTable.Plugin.SearchHeader.SearcherFactory.prototype={build:function(a){if("string"==typeof a){if(this.searchers.hasOwnProperty(a))return new this.searchers[a];throw"No such searcher in factory : '"+a+"'"}if("object"==typeof a){if(a instanceof ZeroTable.Plugin.SearchHeader.Searcher)return a;throw"The resource passed to the factory should be an instance of  : ZeroTable.Plugin.SearchField.Searcher'"}}},ZeroTable.Plugin.SearchHeader.Searcher=function(a){ZeroTable.extend(this,[{},a]),this.$drawElement=null,this.$cloneList=null},ZeroTable.Plugin.SearchHeader.Searcher.prototype={draw:function(){this.$drawElement||(this.$drawElement=this.__draw(),this.$cloneList=this.$drawElement);var a=this.$drawElement.clone();return this.$cloneList=this.$cloneList.add(a),this.__bindEvents(a),a},update:function(a){a!==this.value&&(this.__updateElements(this.$cloneList,a),this.value=a,this.fire("valueChanged",[a,this]))},getValue:function(){return this.value},lock:function(a){this.__lock(a,this.$cloneList)},__draw:function(){throw"__draw() method not implemented"},__bindEvents:function(a){throw"__bindEvents() method not implemented"},__lock:function(a,b){var c=b.find("input").addBack("input");a?(c.attr("readonly","readonly"),c.addClass("zt-searcher-locked")):(c.removeAttr("readonly"),c.removeClass("zt-searcher-locked"))},__updateElements:function(){throw"__updateElements() method not implemented"}},ZeroTable.Bindable.extends(ZeroTable.Plugin.SearchHeader.Searcher),ZeroTable.Plugin.SearchHeader.String=function(a){ZeroTable.Plugin.SearchHeader.Searcher.apply(this),ZeroTable.extend(this,[{},a])},ZeroTable.extendClass(ZeroTable.Plugin.SearchHeader.String,ZeroTable.Plugin.SearchHeader.Searcher,{__draw:function(){return $("<div class='zt-input-wrapper'><input type='text' placeholder='search...'/></div>")},__bindEvents:function(a){var b=this;a.find("input").on("input",function(){var a=$(this).val();""==a&&(a=null),b.update({type:"eq",value:a})})},__updateElements:function(a,b){a.find("input").val(b.value)}}),ZeroTable.Tools.Paginator=function(a){this.table=a,this.$item=$('<div class="zt-paginator"></div>');var b=$('<div class="zt-pagi-ico zt-first-page">&lt;&lt;</div>'),c=$('<div class="zt-pagi-ico zt-previous-page">&lt;</div>'),d=$('<div class="zt-page-selector"><input type="text"/></div>'),e=$('<div class="zt-total-pages"> / <span class="zt-show"></span></div>'),f=$('<div class="zt-pagi-ico zt-last-page">&gt;&gt;</div>'),g=$('<div class="zt-pagi-ico zt-previous-page">&gt;</div>');this.$item.append(b),this.$item.append(c),this.$item.append(d),this.$item.append(e),this.$item.append(g),this.$item.append(f),g.click(function(){a.goToNextPage()}),f.click(function(){a.goToLastPage()}),b.click(function(){a.goToFirstPage()}),c.click(function(){a.goToPreviousPage()}),d.find("input").on("keyup",function(b){13==b.which&&a.setPage($(this).val(),0)}),d.find("input").on("click",function(){$(this).select()}),a.on("dataUpdated",function(b){e.find(".zt-show").html(a.countPages()),d.find("input").val(a.currentPage())})},ZeroTable.Tools.Paginator.prototype={draw:function(){return this.$item}},ZeroTable.createPlugin({name:"core.clickEvents",defaultOptions:{preventHighlight:!0},optionOverrides:{},init:null,listen:{afterDrawCell:function(a){var b=this.plugin;a.cell.$cell.click(function(c){b.getOption("preventHighlight")&&c.shiftKey&&(a.$table.addClass("zt-unhighlightable"),$(document).one("mouseup",function(){a.$table.removeClass("zt-unhighlightable");var b=window.getSelection?window.getSelection():document.selection;b&&(b.removeAllRanges?b.removeAllRanges():b.empty&&b.empty())})),a.tableInstance.tableEvent("cellClick",{$cell:a.$cell,$row:a.$row,$table:a.$table,event:c,tableInstance:a.tableInstance}),a.tableInstance.tableEvent("rowClick",{$row:a.$row,$table:a.$table,event:c,tableInstance:a.tableInstance})})}},pluginPrototype:{},tableKey:{}}),ZeroTable.createPlugin({name:"core.header",defaultOptions:{updateDelay:5},optionOverrides:{},listen:{onClearTable:function(a){a.$table.find(".zt-table-header").remove()},onDrawTable:function(a){var b=$("<div/>");b.addClass("zt-table-header"),a.$table.find(".zt-wrapper").prepend(b);var c=$("<div/>");c.addClass("zt-header-main"),b.prepend(c),a.tableInstance.fire("beforeDrawHeader",[a]),this.plugin.drawHeaderColumns(c,a.tableInstance),a.tableInstance.fire("afterDrawHeader",[a]),a.tableInstance.fire("headerUpdated",[a])},"addedToDom,headerUpdated":function(a){var b=a.$table.find(".zt-table-header").outerHeight()+"px";a.$table.find(".zt-table-wrapper").css("top",b)}},pluginPrototype:{drawHeaderColumns:function(a,b){var c=this,d=ZeroTable.clone(b.dataConnector.getOrder()),e=0;ZeroTable.foreach(d,function(a,b){d[b]={order:e,direction:a},e++}),ZeroTable.foreach(b.table.columns,function(e){if(e.options.visible){var f=e.options.header?e.options.header:e.options.name,g=b.drawer.drawCell(e,null,{skipClass:!0}),h=g.$cell;g.addRole("header"),h.addClass("zt-header-col");var i=$("<span/>");i.addClass("zt-header-col-title"),h.append(i),i.html(f);var j=$("<span/>");j.addClass("zt-header-col-order"),h.append(j),b.fire("afterDrawCell",[new ZeroTable.TableEvent(b,{columnDef:e,cell:g,$row:a,$table:b.$table})]),a.append(a,h),d[e.getDataIndex()]&&(h.addClass("zt-column-order-"+d[e.getDataIndex()].order),h.addClass("zt-column-ordered"),h.addClass("zt-column-order-"+d[e.getDataIndex()].direction)),b.disableOrdering!==!0&&1==e.options.orderable?(h.addClass("zt-header-col-orderable"),h.click(function(a){var d,e=$(this),f=b.table.getColumnDefinition(e),g=f.getDataIndex(),h=b.dataConnector.getOrder(g);a.shiftKey?d=b.dataConnector.getOrder():(d={},d[g]="asc"),d[g]=h&&"asc"==h?"desc":"asc",b.dataConnector.setOrder(d),b.dataConnector.update(c.getOption("updateDelay",b))})):h.addClass("zt-header-col-unorderable")}})}},tableKey:{}}),ZeroTable.createPlugin({name:"core.loading",defaultOptions:{},optionOverrides:{},listen:{"data.loading":function(a){var b=this.context,c=$("<div/>");c.addClass("zt-loading"),b.$table.find(".zt-wrapper").append(c);var d=$("<div/>");d.addClass("zt-loading-spinner"),c.append(d)},"data.dataUpdated, data.loadFailed":function(a){this.context.$table.find(".zt-wrapper .zt-loading").remove()}},pluginPrototype:{},tableKey:{}}),ZeroTable.createPlugin({name:"core.pagination",defaultOptions:{},optionOverrides:{},init:null,listen:{},pluginPrototype:{},tableKeys:{countPages:function(){var a=this.dataConnector;return a.totalFilteredRows?a.limit?Math.ceil(a.totalFilteredRows/a.limit):1:0},currentPage:function(){var a=this.dataConnector;return a.offset&&a.limit?Math.ceil(a.offset/a.limit)+1:1},setPage:function(a,b){var c=this.dataConnector;if(!c.limit)return!1;var d=this.countPages();d<a?a=d:a<=0&&(a=1),c.setOffset(c.limit*(a-1)),b=b||50,c.update(b)},goToLastPage:function(){this.setPage(this.countPages())},goToFirstPage:function(){this.setPage(1)},goToNextPage:function(){this.setPage(this.currentPage()+1)},goToPreviousPage:function(){this.setPage(this.currentPage()-1)}}}),ZeroTable.createPlugin({name:"core.renderCell",defaultOptions:{stringRenderer:null},optionOverrides:{stringRenderer:"cellStringRenderer"},init:function(){this.getOption("stringRenderer")||this.setOption("stringRenderer",new ZeroTable.stringRendererParser)},listen:{afterDrawCell:function(a){if(a.cell.hasRole("data")){var b=this.plugin.renderParse(a.dataRow,a.columnDef.getDataIndex(),a.columnDef.options.render,a.tableInstance);a.cell.$cell.html(b)}}},pluginPrototype:{renderParse:function(a,b,c,d){var e;if(void 0===c||null===c)e=a[b];else if("function"==typeof c)e=c(a[b],a);else{if("string"!=typeof c)throw"unknown type for render : "+typeof c;e=this.getOption("stringRenderer").render(c,a)}return e}},tableKey:{}}),ZeroTable.createPlugin({name:"core.searchHeader",defaultOptions:{drawHeaders:!0,searcherFactory:null,delay:500},optionOverrides:{},init:function(){this.getOption("searcherFactory")||this.setOption("searcherFactory",new ZeroTable.Plugin.SearchHeader.SearcherFactory({searchers:{string:ZeroTable.Plugin.SearchHeader.String,range:ZeroTable.Plugin.SearchHeader.String}})),this.searchers={}},listen:{afterDrawHeader:function(a){var b=a.$table.find(".zt-table-header");if(b){var c=$("<div/>");c.addClass("zt-searchers"),b.append(c),this.plugin.drawHeaderColumns(c,a.tableInstance)}},onInitialize:function(a){this.plugin.initSearchers(a.tableInstance)}},pluginPrototype:{initSearchers:function(a){var b=this;if(!b.getOption("searcherFactory"))throw"invalid searcher factory";ZeroTable.foreach(a.table.columns,function(c){if(c.options.searcher){var d=b.getOption("searcherFactory").build(c.options.searcher);a.__searchHeaderSearchers[c.options.name]=d,d.on("valueChanged",function(d,e){a.dataConnector.filterColumn(c.options.name,d),a.dataConnector.update(b.getOption("delay"))})}})},drawHeaderColumns:function(a,b){ZeroTable.foreach(b.table.columns,function(c){if(c.options.visible){var d=b.drawer.drawCell(c,null,{skipClass:!0}),e=d.$cell;d.addRole("header"),e.addClass("zt-header-col"),b.fire("afterDrawCell",[new ZeroTable.TableEvent(b,{$table:b.$table,columnDef:c,$row:a,cell:d})]),a.append(a,e),b.__searchHeaderSearchers[c.options.name]&&e.append(b.__searchHeaderSearchers[c.options.name].draw())}})}},tableKeys:{__searchHeaderSearchers:{}}}),ZeroTable.createPlugin({name:"core.selection",defaultOptions:{maxSelection:-1,keepSelection:!1,selectionClass:"zt-selected",noSelectableClass:"zt-no-select"},optionOverrides:{maxSelection:"maxSelection",keepSelection:"keepSelection"},init:null,listen:{rowClick:function(a){a.$row.hasClass("zt-data-row")&&!a.$row.hasClass(this.plugin.getOption("noSelectableClass"))&&this.plugin.emulateClick(a.tableInstance,a.$row,a.event.shiftKey)},afterDrawRows:function(a){if(1==this.plugin.getOption("keepSelection")){if(!a.tableInstance.table.idProperties>0)throw"Cannot enable keepSelection feature. table.idProperties was not specified";this.plugin.__restoreSelection(a.tableInstance)}}},pluginPrototype:{__restoreSelection:function(a){var b=this;a.$table.find(".zt-table-tr.zt-data-row").each(function(c,d){var e=$(d),f=a.table.getRowId(e);f&&a.internalSelection[f]?e.addClass(b.getOption("selectionClass")):e.removeClass(b.getOption("selectionClass"))})},makeRowSelection:function(a,b,c){if(0==this.getOption("maxSelection",a))return!1;var d=!1;if(c)if(a.lastSelection&&a.$table.find(a.lastSelection))for(var e=a.lastSelection.hasClass(this.getOption("selectionClass"))?1:-1,f=a.lastSelection.index(),g=b.index(),h=f>g?g:f,i=f>g?f:g,j=h;j<=i;j++){var k=a.$table.find(".zt-table-tr").eq(j);this.selectRow(a,k,e)&&(d=!0)}else d=this.selectRow(a,b,0);else d=this.selectRow(a,b,0);return a.lastSelection&&a.lastSelection.removeClass("zt-last-selection"),b.addClass("zt-last-selection"),a.lastSelection=b,d},selectRow:function(a,b,c){var d=this.getOption("maxSelection",a),e=this;if(d>1){if(b.hasClass(e.getOption("selectionClass"))&&1!==c)return e.rowSetSelection(a,b,!1),!0;if(c!==-1)return!(a.$table.find("."+e.getOption("selectionClass")).length>=d)&&(this.rowSetSelection(a,b,!0),!0)}else if(1==d){if(b.hasClass(e.getOption("selectionClass"))&&1!==c)return this.rowSetSelection(a,b,!1),!0;if(c!==-1)return this.clearTableSelection(a),this.rowSetSelection(a,b,!0),!0}else if(d===!1)return 0===c?b.hasClass(e.getOption("selectionClass"))?this.rowSetSelection(a,b,!1):this.rowSetSelection(a,b,!0):1===c?this.rowSetSelection(a,b,!0):this.rowSetSelection(a,b,!1),!0},getSelectedRows:function(a){return a.$table.find("."+this.getOption("selectionClass"))},rowSetSelection:function(a,b,c){c?(b.addClass(this.getOption("selectionClass")),this.getOption("keepSelection",a)&&this.__internalSelectionAdd(a,b)):(b.removeClass(this.getOption("selectionClass")),this.getOption("keepSelection",a)&&this.__internalSelectionRemove(a,a.table.getRowId(b)))},clearTableSelection:function(a){for(var b=this.getSelectedRows(a),c=0;c<b.length;c++)this.rowSetSelection(a,$(b[c]),!1);a.internalSelection={}},__internalSelectionAdd:function(a,b){a.internalSelection[a.table.getRowId(b)]=b.data("dataSet")},__internalSelectionRemove:function(a,b){a.internalSelection[b]=null,delete a.internalSelection[b]},emulateClick:function(a,b,c){var d=this.makeRowSelection(a,b,c);d&&a.tableEvent("selectionChange",{changed:d})}},tableKey:function(a){return{internalSelection:{},lastSelection:{},getSelection:function(){var b=[];return a.getOption("keepSelection",this)&&ZeroTable.foreach(this.internalSelection,function(a){b.push(a)}),b},countSelection:function(){return this.getSelection().length},getVisibleSelection:function(){var a=[];return this.tableInstance.$table.find(".zt-table-tr.zt-data-row").each(function(b,c){var d=$(c);a.push(d.data("dataSet"))}),a},countVisibleSelection:function(){return this.getVisibleSelection().length},countHiddenSelection:function(){return this.countSelection()-this.countVisibleSelection()},clearSelection:function(){a.clearTableSelection(this)}}}}),ZeroTable.createPlugin({name:"core.sizing",defaultOptions:{defaultWidth:100},optionOverrides:{columnDefaultWidth:"defaultWidth"},listen:{onClearTable:function(a){a.$table.find(".zt-table-table .zt-table-colgroup").remove()},afterDrawCell:function(a){this.plugin.sizeCell(a.cell.$cell,a.columnDef)},afterDrawRow:function(a){this.plugin.sizeRow(a.$row,a.$table)}},pluginPrototype:{sizeCell:function(a,b){var c;c=b.options.size?b.options.size+"px":this.getOption("defaultWidth")+"px",a.css("width",c)},sizeRow:function(a,b){var c=0;a.find(".zt-table-td").each(function(a){c+=$(this).outerWidth()}),a.width(c),b.find(".zt-wrapper").width(c)}},tableKey:{}}),ZeroTable.createPlugin({name:"core.tableBody",defaultOptions:{rowClass:null},optionOverrides:{rowClass:"rowClass"},listen:{onClearTable:function(a){a.$table.find(".zt-table-wrapper .zt-table-table .zt-table-tbody").remove()},onDrawTable:function(a){var b=$("<div/>");b.addClass("zt-table-tbody"),a.$table.find(".zt-table-wrapper .zt-table-table").append(b)},dataUpdated:function(a){var b=a.tableInstance,c=a.$table,d=c.find(".zt-table-tbody");d.empty();var e=this.plugin.getOption("rowClass",b);if(null!==e&&e!==!1&&"function"!=typeof e)throw"bad type for 'rowClass' option. It should be null or a function";b.tableEvent("beforeDrawRows",a),ZeroTable.foreach(a.data,function(a){b.tableEvent("beforeDrawRow",{$table:c,dataRow:a});var f=b.drawer.drawRow(c,{role:"data"});if(f.data("dataSet",a),f.addClass("zt-data-row"),e){var g=e(a);g&&f.addClass(g)}ZeroTable.foreach(b.table.columns,function(d){if(d.options.visible){b.tableEvent("beforeDrawCell",{$table:c,dataRow:a,columnDef:d,$row:f});var e=b.drawer.drawCell(d,"");e.addRole("data"),b.tableEvent("afterDrawCell",{$table:c,dataRow:a,columnDef:d,$row:f,cell:e}),f.append(e.$cell)}}),b.tableEvent("afterDrawRow",{$table:c,dataRow:a,$row:f}),d.append(f)}),b.tableEvent("afterDrawRows",a)}},pluginPrototype:{},tableKey:{}});
//# sourceMappingURL=zero-table.min.js.map